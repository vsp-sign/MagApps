<html>
<head>
    <script type="module" crossorigin src="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.css" />
</head>
<body>
<p> <h3>Recorder_to_Flute(song, shifter=0) </h3><br>
    Default is C major scale; Bansuri is G# base, so all holes closed is a P_<br>
    If you want to shift the scale, use shifter='n' according to your needs.
</p>
<gradio-lite>
import gradio as gr
def Recorder_to_Flute(song, shifter=0):
    '''Recorder_to_Flute(song, shifter=0)
        Default is C major scale; Bansuri is G# base, so all holes closed is a P_
        If you want to shift the scale, use shifter='n' according to your needs.
    '''
    def string_to_list(s):
        i = 0; result = []
        while i < len(s):
            if i+1 < len(s) and (s[i+1] in ['_', '`', '^', '*']):
                result.append(s[i:i+2]); i += 2
            else:
                result.append(s[i]); i += 1
        return result
    

    Sur=['P_', 'D_', 'N_', 'S', 'R', 'G', 'M', 'P', 'D', 'N', 'S`', 'R`', 'G`', 'M`', 'P`', 'D`', 'N`', 'S`', 'R`', 'G`', 'M`', 'P`', 'D`', 'N`', 's^', 'r^', 'g^', 'm^', 'p^', 'd^', 'n^', 's*', 'r*', 'g*', 'm*']
    Note=['C', 'D', 'E', 'F', 'G', 'A', 'B', 'C`', 'D`', 'E`', 'F`', 'G`', 'A`', 'B`', 'C^', 'D^', 'E^', 'F^', 'G^', 'A^', 'B^', 'C*', 'D*', 'E*', 'F*', 'G*', 'A*', 'B*']
    
    shifted_Sur=Sur[shifter:]+Sur[:shifter]
    Sur_dict=dict(zip(Note, shifted_Sur))

    SongNotes=string_to_list(song)

    NewSongNotes=[]
    for note in SongNotes:
        if note in Sur_dict:
            NewSongNotes.append(Sur_dict.get(note))
        else:
            NewSongNotes.append(note)
    NewSongNotes= ''.join(NewSongNotes)
    
    wavylines=''.join(["~"*int(len(NewSongNotes))+"~"*int(len("Transposed song notes below:"))])
    Banner=''.join([wavylines, "\n", " "*int((len(NewSongNotes)/2)), "Transposed song notes below:", "\n", wavylines])

    #print(Banner, NewSongNotes, end='')
    output=[Banner, NewSongNotes, wavylines]
    return f"{Banner}\n{NewSongNotes}\n{wavylines})"
         
iface1=gr.Interface (Recorder_to_Flute, "textbox", "textbox")

iface1.launch()
</gradio-lite>
<p> <a href="page2.html">Notes Shifter</a>!</p>
<p> <a href="page3.html">Direct transposer</a>!</p>
</body>
</html>
